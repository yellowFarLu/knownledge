# 面经



## 2020年 02月11号 阿里

### 一面

- 1、一致性hash算法
- 2、支付系统架构
- 3、灰度系统架构





## 2019年 12月26号 阿里

### 一面

- 1、 支付平台回调的高可用保证
  - 见“项目——》支付——》支付系统”
- 2、红包生成金额的算法
  - 见“项目——》支付——》支付系统——》红包”
- 3、10个redis节点组成的集群，分摊所有key，这时候客户访问的key在所有的节点挂了，怎么保证高可用
  - 每个节点再组成主从集群
- 4、资金真的出问题了，怎么补偿
  - 内部资金错误，采用调账
  - 外部资金错乱，比如说提现金额错误，这就主要是预防，人工审核大金额的提现
- 5、如何处理幂等
- 6、支付系统是分布式的，怎么保证数据的一致性？
  - 重试、补偿、回滚、日志备份、监控、调账
- 7、灰度系统 mq灰度的实现，怎么保证灰度机器发送的mq消息被灰度机器消费
  - 灰度环境采用灰度的topic，正式环境采用正式的topic
- 8、redis集群（codis）
- 9、java控制并发，如synchronized、ReentrankLock，他们的原理



### 二面

- 1、top的load指标
- 2、研发生命周期(没能理解他说啥)
- 3、浏览器输入地址，会经过哪些步骤
- 4、项目亮点
- 5、业余学习哪些书籍(这个说的太少了)
- 6、NIO、BIO的区别，NIO相对于BIO的优点
- 7、查找某个端口被什么应用占用着
- 8、慢sql怎么优化



### 三面（BOSS面）

- 1、怎么学习一门新技术，学过哪些比较新的技术
- 2、k8s原理
- 3、怎么做code review
- 4、单元测试技术，用过哪些(jmockit)
- 5、灰度系统(下次要主动说明从web层开始路由)
- 6、支付系统要点
- 7、为什么会考上这个学校
- 8、单元测试怎么保证每一个路径都覆盖到呢？
- 9、不同的部门，有针对的准备吧



### 四面（hr）

- TCP和UDP的区别，tcp、udp的端口分别是什么
  - 这里被套路了，TCP和UDP的端口是程序里面绑定的，不是写死的。hr随便问，自己也没有被问过这种问题，一下子懵了，我啊，为何不会自己主动思考一下。。。。。
- 愿不愿意加班
- 吉林大学珠海学院是民办还是公办（民办）
- 做过最有难度的系统是什么，为什么交给你做
- 支付系统的用户量是多少
  - 支付系统的用户量为300w。这里就牵扯到**根据哪些指标去设计一个系统的问题**
  - **当时特别的奇怪，hr听成了8个，我居然没有去纠正。我自己一时也忘记了具体是多少个，所有懵了。其实这种问题非常关键，关系到系统的价值。一定一定要想清楚再说啊。**
- 支付系统、灰度系统为什么不交给别人做，交给你做？
- 先说结论吧：**这次失败的主要原因，是因为对hr的问题没有经过思考，就说出来。并且hr有误解的地方，没有从源头开始纠正。 另外，视频面试的时候，看着别人讲话，不要去注意别人的表情，要咬文嚼字，理清楚别人的意思啊**
- 下次面试的时候，绝对不要跟任何人说了。。。。
- **另外还有hr口中失败的原因，等待他的回复**
- 以后绝对不LG了，严重影响智力和记忆力。**如果要成功，就把LG给戒了！！！**









## 2019年 12月15号 阿里

### 一面

- 1、为什么hashmap不用AVL树，用红黑树
  - 见“jdk源码——》集合——》hashMap”
- 2、怎么找到链表的倒数第n个节点。如果有环，怎么办？
  - 见“算法——》LeetCode——》基础算法题”
- 3、int a=300;  integer b=300，使用等号是true还是false;     integer a=300，b=300呢？     integer a=3, b=3呢？
  - true 、 false、  true
- 4、hashMap1.8相对于1.7做了哪些改进
  - 见“jdk源码——》集合——》hashMap”
- 5、排查线上问题，比如说cpu打满了，怎么排查？
  - 见“项目——》线上问题排查”
- 6、老年代都是什么对象
  - 见“java——》jvm——》GC垃圾回收”
- 7、new一个hashMap，初始容量为1000，然后插入1000个元素，会不会触发扩容。如果是10000呢？
  - 见“jdk源码——》集合——》hashMap”
- 8、其他，比如红包项目、Dubbo、Redis答得还行















## 2019年11月 阿里



### 一面

- 1、java基础类型：byte、char、boolean、short、int、long、float、double
- 2、java是值传递还是引用传递
- 3、一个char多少字节
- 4、ip的网络拓扑
  - 有很多网络，通过路由器连接起来。当源主机发送HTTP报文给目标主机，源主机的路由器获得HTTP报文中的目标主机的IP地址，然后判断该IP地址所处的网络是否和路由器直接相连，如果是，则直接交付给文。否则，把HTTP报文转交给下一个路由器。
- 5、tcp怎么把数据传递给ip
  - 加上IP首部，比如说源主机IP地址、目标主机IP地址
- 6、场景题：双11接近12点的时候，jvm的内存逐渐升高，只有发生full gc，内存才降下来，什么原因
  - 我的思路是：接近12点的时候，请求越来越多，每次请求都可能创建一些对象，并且请求还没有结束，这些对象被引用着，随着占用内存升高，开始频繁发生minor gc，由于请求量很大，很多请求也还没结束，这些临时对象还被引用着，因此无法回收。
    当minor gc达到一定次数，这些临时对象还晋升到老年代了。当老年待内存不够，发生分配担保失败，引发了full gc，由于这时之前的很多请求结束了，因此很多临时对象没有被引用了，从而被回收了，内存又被释放出来。
- 7、findClass和loadClass的区别
  - findClass在ClassLoader中是父类找不到，然后去子类中查找，如果只重写findClass方法，实际上还是会走双亲委派模型
  - loadClass在ClassLoader中是先去父类中找类，找不到再调用findClass去找。因此如果想破坏双亲委派模型，重写loadClass方法才行。（当然，还可以利用线程上下文类加载器等方法）
- 8、桶令牌算法的实现限流
- 9、如果抢红包的时候，缓存中的红包数据没有了，怎么办？
- 10、哪些对象可以称为GC Root
- 11、类对象的回收条件
- 12、Integer的缓存范围
- 13、自己实现客户端来使用Cookie
- 14、支付平台回调过程中有哪些参数？





### 二面

- 1、CMS收集器
  - （1）执行流程：初始标记、并发标记、重新标记、并发清除
- 2、一个集群有好几个redis节点，同时收到hsetnx请求，那么会不会发生这样的情况：几个redis节点同时判断key没有，然后就插入。(答案在项目解析里)
- 3、红包里面，1个人同时点了很多下抢红包，产生2个请求，一个请求来到服务A，一个请求来到服务B，那么怎么保证这个人不会抢到2个红包？（如何保证一个人不会抢到多个红包） (答案在项目解析里)
- 4、多个人同时抢，如何保证不会抢到同一个红包？(答案在项目解析里)
- 5、dubbo消费调用过程
- 6、设计原则（只说了一点，要加强）、设计模式（整理一下咱们项目中使用到的所有设计模式）
- 7、MySQL的索引实现
  - （1）有哪些索引，这里说的不够全： 聚集索引、联合索引、唯一索引、覆盖索引
- 8、RocketMQ是顺序消费的吗？如何实现顺序消费？顺序消费有什么坏处？
- 9、假设要重启一个dubbo服务，怎么切掉流量重启，然后重启完了再切回流量
  - 参考   Dubbo优雅停机——》问题





### 三面

- 1、如果hsetnx实际上是成功的，但是redis返回超时，这种情况怎么处理

- 2、算法：（1）堆排序的实现、时间复杂度    （2）快速排序的实现、时间复杂度

​                     （3）走阶梯问题，如果一次可以走1步或者2步，一共有多少种走法？

​				参考：https://blog.csdn.net/sinat_25972161/article/details/72456518

- 3、如何实现一个自定义同步器
- 4、如何保证高并发
- 5、峰值QPS、一天的流量PV
- 6、什么是高并发、高流量？
  - 高并发指的是流量很大的情况下，系统还能正常运行，并且保证数据不出错
  - 高流量指的是请求量很大





### 四面（BOSS面）

- 1、Dubbo整体架构，分为几层
- 2、Dubbo默认使用什么解析协议，还知道哪些协议
- 3、Zookeeper是什么协议实现的，为什么不直接使用Paxos协议
- 4、Synchronize为什么使用自旋锁
- 5、自旋锁适用于什么场景
- 6、Java有哪几种锁（乐观锁、悲观锁）
- 7、Java值传递、引用传递
- 8、形参、实参是什么，有什么区别
- 9、灰度系统的实现
- 10、支付系统的实现，怎么抗住高并发
- 11、Dubbo网络调用过程（其实就是消费过程）

















## 扩展



1、**分布式相关的，比如Spring、Dubbo、ZK、Redis、DB、MQ这些重点准备**

2、做过的项目挑出来讲的，要了解整个项目的价值、和发展方向